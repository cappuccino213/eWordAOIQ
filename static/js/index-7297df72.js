import{_ as V}from"./login_back-4dcb9311.js";import{j as F,k as L,c as I,d as E}from"./element-plus-df419614.js";import{r as m,a0 as x,o as b,c as C,a as s,W as f,X as r,Q as p,u as t,a9 as R}from"./@vue-500f6e4a.js";import{u as $}from"./vue-router-a3c91db2.js";import{u as P,a as q,g as B}from"./loggedInfo-268f6dc2.js";import{u as K}from"./deductPoint-95fe9152.js";import{l}from"./index-66a691da.js";import"./lodash-es-8e578a42.js";import"./@element-plus-58134fba.js";import"./@popperjs-892fd7f5.js";import"./@ctrl-eb0b847c.js";import"./dayjs-d69067b3.js";import"./axios-805d1980.js";import"./async-validator-efc2d198.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./@floating-ui-d1015eb5.js";import"./pinia-d75d73cf.js";import"./index-f3494083.js";import"./lodash-4ca21166.js";import"./pinia-plugin-persistedstate-4761f546.js";const S={class:"login_box"},U={class:"input_box"},j={class:"title_text_banner"},D=s("div",{class:"welcome_text_banner"},"\u6B22\u8FCE\u4F7F\u7528",-1),M=["onKeyup"],Q={__name:"loginForm",props:{softName:{type:String,default:""}},setup(g){var h,v;const i=$(),a=P(),c=K();let n=m(),o=x({account:(h=l.getCache("account"))!=null?h:"",password:(v=l.getCache("password"))!=null?v:""}),k=x({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D/\u5DE5\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]});const u=()=>{n.value.validate(d=>{d&&(l.setCache("account",o.account),q(o).then(e=>{e.code===200&&e.status?(l.setCache("role",e.data.role),l.setCache("dept",e.data.dept),l.setCache("name",e.data.realname),l.setCache("token",e.token),a.handleUserList(),a.handleProductList(),a.handleProjectList(),a.handleInfoList(),c.getRuleList(),i.push("/")):F.error(e.message)}))})};return document.onkeydown=function(d){if(window.event==null)var e=d.keyCode;else var e=window.event.keyCode;e==13&&u()},(d,e)=>{const w=L,y=I,N=E;return b(),C("div",S,[s("div",U,[s("div",j,f(g.softName),1),D,r(N,{ref_key:"loginFormRef",ref:n,"label-position":"top","label-width":"80px",model:t(o),rules:t(k),class:"login_form"},{default:p(()=>[r(y,{label:"\u7528\u6237\u540D/\u5DE5\u53F7",prop:"account"},{default:p(()=>[r(w,{modelValue:t(o).account,"onUpdate:modelValue":e[0]||(e[0]=_=>t(o).account=_)},null,8,["modelValue"])]),_:1}),r(y,{label:"\u5BC6\u7801",prop:"password"},{default:p(()=>[r(w,{modelValue:t(o).password,"onUpdate:modelValue":e[1]||(e[1]=_=>t(o).password=_),"show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),s("div",{class:"login_btn",onClick:u,onKeyup:R(u,["enter"])},"\u767B \u5F55",40,M)])])}}};const W={class:"login_box"},X=s("div",{class:"login_left"},[s("img",{src:V})],-1),z={class:"login_right"},A={class:"info"},fe={__name:"index",setup(g){let i=m(""),a=m(""),c=m("");return B().then(n=>{if(n.data){console.log(n.data);let o=n.data;i.value=o.companyName,a.value=o.softName,c.value=o.version}}),(n,o)=>(b(),C("div",W,[X,s("div",z,[r(t(Q),{softName:t(a)},null,8,["softName"]),s("div",A,[s("span",null,f(t(i)),1),s("span",null,f(t(c)),1)])])]))}};export{fe as default};
