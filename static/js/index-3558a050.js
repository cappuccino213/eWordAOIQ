import{v as q}from"./element-plus-df419614.js";import{d}from"./dayjs-d69067b3.js";import{g as x,u as L}from"./dateChange-eb10ac1f.js";import{u as $}from"./loggedInfo-268f6dc2.js";import{p as B}from"./index-685d72d8.js";import{_ as E,l as Y}from"./index-66a691da.js";import"./initFormData-b064dc9f.js";import{r as p,a0 as I,d as N,a4 as b,o as C,c as y,X as i,Q as g,u as v,V as M}from"./@vue-500f6e4a.js";import"./lodash-es-8e578a42.js";import"./@element-plus-58134fba.js";import"./@popperjs-892fd7f5.js";import"./@ctrl-eb0b847c.js";import"./async-validator-efc2d198.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./@floating-ui-d1015eb5.js";import"./axios-805d1980.js";import"./pinia-d75d73cf.js";import"./index-f3494083.js";import"./vue-router-a3c91db2.js";import"./lodash-4ca21166.js";import"./pinia-plugin-persistedstate-4761f546.js";const O=[{type:"select",value:[],label:"\u59D3\u540D",prop:"owner",attrs:{style:{width:"100%"},clearable:!0},rules:[{required:!0,message:"\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],children:[]},{type:"date-picker",value:[d(new Date(x()).setHours(0,0,0)).format("YYYY-MM-DD HH:mm:ss"),d(new Date().setHours(23,59,59)).format("YYYY-MM-DD HH:mm:ss")],label:"\u65F6\u95F4",prop:"dateRange",rules:[{required:!0,message:"\u65E5\u671F\u9009\u62E9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],attrs:{style:{width:"100%"},multiple:!0,collapseTags:!0,type:"daterange",rangeSeparator:"\u81F3",startPlaceholder:"\u5F00\u59CB\u65E5\u671F",endPlaceholder:"\u7ED3\u675F\u65E5\u671F",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD HH:mm:ss",shortcuts:[{text:"\u4ECA\u5929",value:()=>{const t=new Date().setHours(0,0,0),e=new Date().setHours(23,59,59);return[t,e]}},{text:"\u4E00\u5468\u5185",value:()=>{const t=new Date().setHours(23,59,59),e=new Date().setTime(new Date().getTime()-3600*1e3*24*7);return[new Date(e).setHours(0,0,0),t]}},{text:"\u4E00\u6708\u5185",value:()=>{const t=new Date().setHours(23,59,59),e=new Date().setTime(new Date().getTime()-3600*1e3*24*30);return[new Date(e).setHours(0,0,0),t]}},{text:"\u534A\u5E74\u5185",value:()=>{const t=new Date().setHours(23,59,59),e=new Date().setTime(new Date().getTime()-3600*1e3*24*182);return[new Date(e).setHours(0,0,0),t]}},{text:"\u4E00\u5E74\u5185",value:()=>{const t=new Date().setHours(23,59,59),e=new Date().setTime(new Date().getTime()-3600*1e3*24*365);return[new Date(e).setHours(0,0,0),t]}},{text:"\u7B2C\u4E00\u5B63\u5EA6",value:()=>{var t=new Date,e=t.getFullYear();const a=new Date(e,0,1).setHours(0,0,0),n=new Date(e,2,31).setHours(23,59,59);return[a,n]}},{text:"\u7B2C\u4E8C\u5B63\u5EA6",value:()=>{var t=new Date,e=t.getFullYear();const a=new Date(e,3,1).setHours(0,0,0),n=new Date(e,5,30).setHours(23,59,59);return[a,n]}},{text:"\u7B2C\u4E09\u5B63\u5EA6",value:()=>{var t=new Date,e=t.getFullYear();const a=new Date(e,6,1).setHours(0,0,0),n=new Date(e,8,30).setHours(23,59,59);return[a,n]}},{text:"\u7B2C\u56DB\u5B63\u5EA6",value:()=>{var t=new Date,e=t.getFullYear();const a=new Date(e,9,1).setHours(0,0,0),n=new Date(e,11,31).setHours(23,59,59);return[a,n]}}]}}],R=[{label:"\u59D3\u540D",prop:"name",align:"center"},{label:"\u9879\u76EE",prop:"projectName",align:"center"},{label:"\u6743\u91CD\u503C",prop:"projectWeight",align:"center"}];const S={class:"wrapper targetSetpage-wrapper"},V=M("\u67E5\u8BE2"),P=M("\u91CD\u7F6E"),Q={__name:"projectWeight",setup(t){const[e,a,n]=L(),_=$(),w=p(null);let l=p(O),u=I({owner:"",beginDate:"",endDate:""}),D=p([]),f=p("");N(()=>{h(),H(u)});const h=()=>{Y.getCache("role")==="top"?l.value[0].value=_.qaList[0].value:l.value[0].value=Y.getCache("account"),l.value[0].children=_.qaList};h();const H=o=>{const c=l.value[0].children;B(o).then(r=>{r.data&&r.data.length&&(D.value=r.data.map(s=>{for(let m of c)f.value===m.value&&(s.name=m.label);return s.projectWeight=s.projectWeight.toFixed(2),s}))})},T=o=>{const c=o.model,r=o.model.dateRange;o.form.validate(s=>{s&&(f.value=c.owner,u.owner=c.owner,u.beginDate=e.value||r[0],console.log(e.value+","+r[0]),u.endDate=a.value||r[1],console.log(a.value+","+r[1]),H(u))})},j=o=>{e.value="",a.value="",l.value[1].value=[d(new Date(x()).setHours(0,0,0)).format("YYYY-MM-DD HH:mm:ss"),d(new Date().setHours(23,59,59)).format("YYYY-MM-DD HH:mm:ss")],console.log(w.value.model),D.value=[]},k=o=>{n(o)};return(o,c)=>{const r=q,s=b("e-form"),m=b("e-table");return C(),y("div",S,[i(s,{ref_key:"form",ref:w,options:v(l),onDateChange:k},{action:g(F=>[i(r,{type:"primary",onClick:W=>T(F)},{default:g(()=>[V]),_:2},1032,["onClick"]),i(r,{onClick:W=>j()},{default:g(()=>[P]),_:2},1032,["onClick"])]),_:1},8,["options"]),i(m,{options:v(R),data:v(D),stripe:"",border:"",height:"800"},null,8,["options","data"])])}}},X=E(Q,[["__scopeId","data-v-53450201"]]),ve={__name:"index",setup(t){return(e,a)=>(C(),y("div",null,[i(X)]))}};export{ve as default};
