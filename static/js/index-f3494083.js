import{a as u}from"./axios-805d1980.js";import{l as h}from"./index-66a691da.js";class a{constructor(e){var o,p,n,s;this.instance=u.create(e),this.interceptors=e.interceptors,this.instance.interceptors.request.use((o=this.interceptors)==null?void 0:o.requestInterceptors,(p=this.interceptors)==null?void 0:p.requestInterceptorsCatch),this.instance.interceptors.response.use((n=this.interceptors)==null?void 0:n.responseInterceptors,(s=this.interceptors)==null?void 0:s.responseInterceptorsCatch),this.instance.interceptors.request.use(t=>t,t=>t),this.instance.interceptors.response.use(t=>{const c=t.data;if((c==null?void 0:c.returnCode)==="-1001")console.log("\u8BF7\u6C42\u5931\u8D25");else return c},t=>(t.response.status===404&&console.log("404\u9519\u8BEF"),t))}request(e){return new Promise((o,p)=>{var n;(n=e.interceptors)!=null&&n.requestInterceptors&&(e=e.interceptors.requestInterceptors(e)),this.instance.request(e).then(s=>{var t;(t=e.interceptors)!=null&&t.responseInterceptors&&(s=e.interceptors.responseInterceptors(s)),o(s)})})}get(e){return this.request({...e,method:"GET"})}post(e){return this.request({...e,method:"POST"})}put(e){return this.request({...e,method:"PUT"})}delete(e){return this.request({...e,method:"DELETE"})}patch(e){return this.request({...e,method:"PATCH"})}}let i="";const q=1e4;i=HOST;const m=new a({baseURL:i,timeout:q,interceptors:{requestInterceptors:r=>{const e=h.getCache("token");return e&&(r.headers.Authorization=`Bearer ${e}`),r},requestInterceptorsCatch:r=>r,responseInterceptors:r=>r,responseInterceptorsCatch:r=>r}});export{m as e};
